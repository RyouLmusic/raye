# ask_user 工具视觉效果演示

## 场景 1：生成报告

### Agent 询问
```
╔═══════════════════════════════════════════════════════════╗
║  ⚠️  AGENT 正在询问                                       ║
╠═══════════════════════════════════════════════════════════╣
║                                                           ║
║  ╭───────────────────────────────────────────────────╮   ║
║  │                                                   │   ║
║  │  您想要生成哪种格式的报告？                      │   ║
║  │  1) PDF                                           │   ║
║  │  2) Excel                                         │   ║
║  │  3) CSV                                           │   ║
║  │                                                   │   ║
║  ╰───────────────────────────────────────────────────╯   ║
║                                                           ║
║  您的回答:                                                ║
║  ▶ PDF_____________________________________________       ║
║                                                           ║
║  ┌───────────────────────────────────────────────────┐   ║
║  │ 💡 按 Enter 提交 | Ctrl+C 取消                    │   ║
║  └───────────────────────────────────────────────────┘   ║
║                                                           ║
╚═══════════════════════════════════════════════════════════╝
```

### 历史记录显示
```
? ASK_USER → 您想要生成哪种格式的报告？
  ✓ 用户回复: PDF

◆ generate_report [正在生成 PDF 报告...]
```

## 场景 2：确认删除

### Agent 询问
```
╔═══════════════════════════════════════════════════════════╗
║  ⚠️  AGENT 正在询问                                       ║
╠═══════════════════════════════════════════════════════════╣
║                                                           ║
║  ╭───────────────────────────────────────────────────╮   ║
║  │                                                   │   ║
║  │  即将删除以下 10 个文件：                        │   ║
║  │  - temp1.txt                                      │   ║
║  │  - temp2.txt                                      │   ║
║  │  - ...                                            │   ║
║  │                                                   │   ║
║  │  确认删除吗？(yes/no)                            │   ║
║  │                                                   │   ║
║  ╰───────────────────────────────────────────────────╯   ║
║                                                           ║
║  您的回答:                                                ║
║  ▶ yes_____________________________________________       ║
║                                                           ║
║  ┌───────────────────────────────────────────────────┐   ║
║  │ 💡 按 Enter 提交 | Ctrl+C 取消                    │   ║
║  └───────────────────────────────────────────────────┘   ║
║                                                           ║
╚═══════════════════════════════════════════════════════════╝
```

### 历史记录显示
```
? ASK_USER → 确认删除吗？(yes/no)
  ✓ 用户回复: yes

◆ delete_files [已删除 10 个文件]
```

## 场景 3：获取 API 密钥

### Agent 询问
```
╔═══════════════════════════════════════════════════════════╗
║  ⚠️  AGENT 正在询问                                       ║
╠═══════════════════════════════════════════════════════════╣
║                                                           ║
║  ╭───────────────────────────────────────────────────╮   ║
║  │                                                   │   ║
║  │  需要 OpenAI API 密钥才能继续                    │   ║
║  │  请输入您的 API 密钥：                           │   ║
║  │                                                   │   ║
║  ╰───────────────────────────────────────────────────╯   ║
║                                                           ║
║  您的回答:                                                ║
║  ▶ sk-proj-***********************************_______     ║
║                                                           ║
║  ┌───────────────────────────────────────────────────┐   ║
║  │ 💡 按 Enter 提交 | Ctrl+C 取消                    │   ║
║  └───────────────────────────────────────────────────┘   ║
║                                                           ║
╚═══════════════════════════════════════════════════════════╝
```

### 历史记录显示
```
? ASK_USER → 请输入您的 API 密钥
  ✓ 用户回复: [已隐藏]

◆ configure_api [API 密钥已设置]
```

## 颜色方案（终端实际效果）

### 黄色主题
```
╔═══════════════════════════════════════════════════════════╗  ← yellowBright
║  ⚠️  AGENT 正在询问                                       ║  ← black on yellowBright
╠═══════════════════════════════════════════════════════════╣
║  ╭───────────────────────────────────────────────────╮   ║  ← yellow
║  │ 您想要生成哪种报告？                              │   ║  ← white/yellow
║  ╰───────────────────────────────────────────────────╯   ║
║  您的回答:                                                ║  ← cyanBright
║  ▶ PDF_____________________________________________       ║  ← cyan
╚═══════════════════════════════════════════════════════════╝
```

### 对比：普通工具调用
```
◆ calculate [42 bytes]  ← cyan (低优先级)
```

### 对比：ask_user 工具调用
```
? ASK_USER → 您想要什么？  ← yellowBright (高优先级)
  ✓ 用户回复: PDF          ← cyanBright
```

## 内联版本（简化场景）

```
? 您想要生成哪种报告？
▶ PDF_____________________________________________
```

适用于：
- 空间受限的场景
- 快速问答
- 嵌入式使用

## 动画效果（伪代码）

### 1. 模态框出现
```
[无内容]
    ↓
[淡入动画]
    ↓
╔═══════════════════════════════════════════════════════════╗
║  ⚠️  AGENT 正在询问                                       ║
║  ...                                                      ║
╚═══════════════════════════════════════════════════════════╝
```

### 2. 用户输入
```
▶ _____________________________________________  ← 光标闪烁
    ↓
▶ P____________________________________________
    ↓
▶ PD___________________________________________
    ↓
▶ PDF__________________________________________
```

### 3. 提交后消失
```
╔═══════════════════════════════════════════════════════════╗
║  ⚠️  AGENT 正在询问                                       ║
║  ...                                                      ║
╚═══════════════════════════════════════════════════════════╝
    ↓
[淡出动画]
    ↓
[转换为历史记录]
    ↓
? ASK_USER → 您想要生成哪种报告？
  ✓ 用户回复: PDF
```

## 响应式布局

### 宽屏终端（>80 列）
```
╔═══════════════════════════════════════════════════════════╗
║  ⚠️  AGENT 正在询问                                       ║
║  ╭───────────────────────────────────────────────────╮   ║
║  │ 您想要生成哪种报告？                              │   ║
║  ╰───────────────────────────────────────────────────╯   ║
╚═══════════════════════════════════════════════════════════╝
```

### 窄屏终端（<80 列）
```
╔═══════════════════════════════════╗
║  ⚠️  AGENT 正在询问               ║
║  ╭───────────────────────────╮   ║
║  │ 您想要生成哪种报告？      │   ║
║  ╰───────────────────────────╯   ║
╚═══════════════════════════════════╝
```

## 错误状态

### 输入为空
```
╔═══════════════════════════════════════════════════════════╗
║  ⚠️  AGENT 正在询问                                       ║
║  ╭───────────────────────────────────────────────────╮   ║
║  │ 您想要生成哪种报告？                              │   ║
║  ╰───────────────────────────────────────────────────╯   ║
║  您的回答:                                                ║
║  ▶ _____________________________________________          ║
║                                                           ║
║  ⚠️  请输入有效的答案                                     ║  ← red
╚═══════════════════════════════════════════════════════════╝
```

### 超时警告
```
╔═══════════════════════════════════════════════════════════╗
║  ⚠️  AGENT 正在询问                                       ║
║  ╭───────────────────────────────────────────────────╮   ║
║  │ 您想要生成哪种报告？                              │   ║
║  ╰───────────────────────────────────────────────────╯   ║
║  您的回答:                                                ║
║  ▶ _____________________________________________          ║
║                                                           ║
║  ⏱️  剩余时间: 30 秒                                      ║  ← yellow
╚═══════════════════════════════════════════════════════════╝
```

## 可访问性特性

### 键盘导航
- `Tab` - 在元素间切换（如果有多个输入）
- `Enter` - 提交答案
- `Ctrl+C` - 取消输入
- `Esc` - 关闭模态框（可选）

### 屏幕阅读器
- 标题："Agent 正在询问"
- 问题内容：完整读出
- 输入提示："您的回答"
- 操作提示："按 Enter 提交，Ctrl+C 取消"

### 高对比度
- 黄色边框在深色背景下清晰可见
- 白色文字在黑色背景下易读
- 青色输入与黄色问题形成对比

## 总结

通过精心设计的视觉效果，`ask_user` 工具能够：

✅ **立即吸引注意** - 黄色主题 + 双层边框  
✅ **清晰传达信息** - 问题内容突出显示  
✅ **引导用户操作** - 明确的输入提示和操作说明  
✅ **保持一致性** - 与整体 TUI 风格协调  
✅ **支持可访问性** - 键盘导航 + 高对比度  

这是一个专业、易用、美观的交互设计！
